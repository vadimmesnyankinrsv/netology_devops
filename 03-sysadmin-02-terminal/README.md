# Домашнее задание к занятию "3.2. Работа в терминале, лекция 2"

### 1. Какого типа команда cd? Попробуйте объяснить, почему она именно такого типа; опишите ход своих мыслей, если считаете что она могла бы быть другого типа.

    type cd
    вывод: cd is a shell builtin

cd - это команда оболочки (встроенная). cd меняет текущую директорию, следовательно должна влиять на текущее окружение. Если бы она была внешней, то результат выполнения команды не повлиял бы на текущий терминал, изменив указатель директории только у себя во внешней среде. 

### 2. Какая альтернатива без pipe команде grep <some_string> <some_file> | wc -l? 

В документации, приведенной по ссылке указано

    Anything that looks like
	something | grep '..*' | wc -l
    can usually be rewritten like something along the lines of
	something | grep -c .   # Notice that . is better than '..*'

таким образом аналогом будет

    <some_string> | grep --file=<some_file> -c

### 3. Какой процесс с PID 1 является родителем для всех процессов в вашей виртуальной машине Ubuntu 20.04?

    pstree -p

systemd(1)

### 4. Как будет выглядеть команда, которая перенаправит вывод stderr ls на другую сессию терминала?

    su ls -l 2>/dev/tty/2

### 5. Получится ли одновременно передать команде файл на stdin и вывести ее stdout в другой файл? Приведите работающий пример.

Получится

    <somefile >somefile

### 6. Получится ли находясь в графическом режиме, вывести данные из PTY в какой-либо из эмуляторов TTY? Сможете ли вы наблюдать выводимые данные?

Получится вывести, но не наблюдать

    echo testtesttest > /dev/tty10

чтобы наблюдать нужно переключиться на /tty10 (CTRL+ALT+F10)

### 7. Выполните команду bash 5>&1. К чему она приведет? Что будет, если вы выполните echo netology > /proc/$$/fd/5? Почему так происходит?

    bash 5>&1

Создает дескриптор с id 5 и перенаправляет его в дескриптор с id 1 (это stdout)

    echo netology > /proc/$$/fd/5

выдаст ошибку "no such file or directory". Если нужно направить вывод с дескриптор с id 5, то корректная команда:

    echo netology >$5

но она тоже выдаст ошибку, так как в текущей сессии такого дескриптора не существует

### 8. Получится ли в качестве входного потока для pipe использовать только stderr команды, не потеряв при этом отображение stdout на pty?

Получится

    ls /root 5>&2 2>&1 1>&5 |cat

новый дескриптор 5 перенаправили в stderr, затем stderr перенаправили в stdout, затем stdout перенаправили в новый десриптор 5

### 9. Что выведет команда cat /proc/$$/environ? Как еще можно получить аналогичный по содержанию вывод?

Вывод переменных окружения. Аналогичный вывод можно получить командой

    env | tr '\n' ' '

### 10. Используя man, опишите что доступно по адресам /proc/\<PID\>/cmdline, /proc/\<PID\>/exe

    man proc

/proc/PID/cmdline - полный путь до файла процесса с указанным PID, если этот процесс не zombie

/proc/PID/exe - ссылка, содержащая фактический путь к выполняемой команде 

### 11. Узнайте, какую наиболее старшую версию набора инструкций SSE поддерживает ваш процессор с помощью /proc/cpuinfo

    sse4_2

### 12. При открытии нового окна терминала и vagrant ssh создается новая сессия и выделяется pty. Однако: ... Почитайте, почему так происходит, и как изменить поведение.

Параметр -t отвечает за переназначение псевдо-терминала. Ситуация, описанная в задаче, вероятно, происходит потому что терминал в этот момент еще не существует и будет создан (предположение?) после ввода пароля. Но мы имеем возможность принудительно переназначить терминал как раз используя параметр -t.

    ssh localhost -t 'tty'

### 13. Бывает, что есть необходимость переместить запущенный процесс из одной сессии в другую. Попробуйте сделать это, воспользовавшись reptyr. Например, так можно перенести в screen процесс, который вы запустили по ошибке в обычной SSH-сессии.

Установил reptyr. Если мы запустим что-либо через ssh, а после завершим сессию, то все процессы, которые были запущены внутри этой сессии получат сигнал завершения работы. Если нам нужно, чтобы процесс продолжал работу после завершения сессии ssh, то нам как раз потребуется reptyr, чтобы перенести процесс из одной сессии в другую.

### 14. ... Узнайте что делает команда tee и почему в отличие от sudo echo команда с sudo tee будет работать.

tee осуществляет вывод одновременно и в stdout, и в файл.
У пользователя нет прав на запись в файл, но tee запущенный с sudo такие права имеет